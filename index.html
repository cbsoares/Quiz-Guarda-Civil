<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Estudos GCM Paulista</title>

<style>
    body {
        margin: 0;
        font-family: Arial, sans-serif;
        background: #f5f5f5;
    }

    header {
        background: #003cff;
        color: white;
        padding: 15px;
        text-align: center;
        font-size: 20px;
        font-weight: bold;
    }

    .container {
        padding: 20px;
    }

    .menu-btn {
        width: 100%;
        background: white;
        border-radius: 10px;
        padding: 18px;
        margin-bottom: 12px;
        font-size: 18px;
        font-weight: bold;
        border: 1px solid #ddd;
        cursor: pointer;
        box-shadow: 0 2px 4px rgba(0,0,0,0.12);
        transition: 0.2s;
    }

    .menu-btn:hover {
        transform: scale(1.02);
    }

    .hidden {
        display: none;
    }

    .card {
        background: white;
        padding: 18px;
        border-radius: 10px;
        margin-bottom: 12px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.15);
    }

    .flashcard {
        font-size: 22px;
        font-weight: bold;
        padding: 20px;
        border-radius: 10px;
        background: #fff;
        text-align: center;
        cursor: pointer;
        box-shadow: 0 2px 4px rgba(0,0,0,0.15);
        min-height: 120px;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .btn {
        width: 100%;
        padding: 15px;
        font-size: 18px;
        margin-top: 10px;
        border-radius: 10px;
        border: none;
        cursor: pointer;
        background: #003cff;
        color: white;
        font-weight: bold;
    }

    .question {
        font-size: 20px;
        margin-bottom: 15px;
        font-weight: bold;
    }

    .option {
        background: white;
        padding: 15px;
        border-radius: 10px;
        border: 1px solid #ddd;
        margin-bottom: 10px;
        cursor: pointer;
        font-size: 18px;
    }

    .option:hover {
        background: #e6eaff;
    }
</style>

</head>
<body>

<header>Estudos Guarda Civil Paulista</header>

<div id="home" class="container">
    <button class="menu-btn" onclick="goTo('flashcards')">üìò Flashcards</button>
    <button class="menu-btn" onclick="startQuiz()">üìù Quiz Di√°rio</button>
    <button class="menu-btn" onclick="startSimulado()">üìö Simulados</button>
</div>


<!-- FLASHCARDS -->
<div id="flashcards" class="container hidden">
    <h2>Flashcards</h2>
    <div id="flashcardBox" class="flashcard">Carregando...</div>
    <button class="btn" onclick="nextFlashcard()">Pr√≥ximo</button>
    <button class="btn" style="background:#777" onclick="goTo('home')">Voltar</button>
</div>


<!-- QUIZ -->
<div id="quiz" class="container hidden">
    <div id="quizQuestion" class="question"></div>
    <div id="quizOptions"></div>
    <button class="btn" style="background:#777" onclick="goTo('home')">Sair</button>
</div>


<!-- SIMULADO -->
<div id="simulado" class="container hidden">
    <h2>Simulado</h2>
    <div id="simQuestion" class="question"></div>
    <div id="simOptions"></div>
    <button class="btn" style="background:#777" onclick="goTo('home')">Sair</button>
</div>



<script>
const API_URL = "https://script.google.com/macros/s/AKfycbz6r_Q0u_sWU2IUYz8v-KzmsisxOzD1bMvqaGHQ-oE7_nIWakLlt3lxaFl7MORwaV2Ctg/exec";

let flashcards = [];
let flashIndex = 0;

let quizList = [];
let quizIndex = 0;

let simList = [];
let simIndex = 0;

// Navega√ß√£o simples
function goTo(screen){
    document.querySelectorAll(".container").forEach(sec => sec.classList.add("hidden"));
    document.getElementById(screen).classList.remove("hidden");
}


// ==========================
// FLASHCARDS
// ==========================
async function loadFlashcards(){
    const r = await fetch(API_URL + "?action=getCards&sheet=cart√µes");
    const data = await r.json();

    if (!data.ok){
        document.getElementById("flashcardBox").innerText = "Erro ao carregar flashcards.";
        return;
    }

    flashcards = data.cards;
    flashIndex = 0;

    showFlashcard();
}

function showFlashcard(){
    if (flashcards.length === 0){
        document.getElementById("flashcardBox").innerText = "Nenhum flashcard encontrado.";
        return;
    }
    document.getElementById("flashcardBox").innerText = flashcards[flashIndex].pergunta;
}

function nextFlashcard(){
    flashIndex = (flashIndex + 1) % flashcards.length;
    showFlashcard();
}


// ==========================
// QUIZ
// ==========================
async function startQuiz(){
    goTo("quiz");
    const r = await fetch(API_URL + "?action=getQuestionsByTopic&topic=Todos");
    const data = await r.json();

    quizList = data.questions;
    quizIndex = 0;

    renderQuiz();
}

function renderQuiz(){
    if (quizIndex >= quizList.length){
        document.getElementById("quizQuestion").innerText = "Fim do quiz!";
        document.getElementById("quizOptions").innerHTML = "";
        return;
    }

    const q = quizList[quizIndex];

    document.getElementById("quizQuestion").innerText = q.question;

    document.getElementById("quizOptions").innerHTML = `
        <div class="option" onclick="answerQuiz('A')">${q.A}</div>
        <div class="option" onclick="answerQuiz('B')">${q.B}</div>
        <div class="option" onclick="answerQuiz('C')">${q.C}</div>
        <div class="option" onclick="answerQuiz('D')">${q.D}</div>
    `;
}

function answerQuiz(choice){
    quizIndex++;
    renderQuiz();
}


// ==========================
// SIMULADO
// ==========================
async function startSimulado(){
    goTo("simulado");

    const r = await fetch(API_URL + "?action=getAllQuestions");
    const data = await r.json();

    simList = data.questions.slice(0, 40); // 40 quest√µes
    simIndex = 0;

    renderSim();
}

function renderSim(){
    if (simIndex >= simList.length){
        document.getElementById("simQuestion").innerText = "Simulado conclu√≠do!";
        document.getElementById("simOptions").innerHTML = "";
        return;
    }

    const q = simList[simIndex];

    document.getElementById("simQuestion").innerText = q.question;

    document.getElementById("simOptions").innerHTML = `
        <div class="option" onclick="answerSim('A')">${q.A}</div>
        <div class="option" onclick="answerSim('B')">${q.B}</div>
        <div class="option" onclick="answerSim('C')">${q.C}</div>
        <div class="option" onclick="answerSim('D')">${q.D}</div>
    `;
}

function answerSim(){
    simIndex++;
    renderSim();
}


// AUTOLOAD FLASHCARDS AO ABRIR
loadFlashcards();
</script>

</body>
</html>
